#!/usr/bin/env node

/**
 * Module dependencies.
 */
 
var program = require('commander');
//var tryJS = require('./../try');
var tryJS = require('./../tryme').runCmd;
 
cmd
  .version('0.0.1')
  .option('-f, --file', '指定某个文件')
  .option('-d, --direct', '指定文件夹')
  .option('-i, --ignore', '忽略文件夹或文件')
  .option('-b, --debug', '启动 debug 模式' )
    .arguments('<cmd> [env]')
    .action(function (cmd, env) {
        cmdValue = cmd;
        envValue = env;
    })
  .parse(process.argv);

cmd
  .version('0.1.0')
  .command('compile <dir>')
  .description('编译某个文件夹')
  .option('-f, --file', '指定某个文件')
  .action(function( dir, options ) {

    if(dir) {
      options.directory = dir;
    }
    runCmd('compile', options);
  });


console.log('## start transform...');

var opt = {};
if(cmd.debug){
	opt.debug = true;
}

tryJS(cmd);
console.log('## transform end');